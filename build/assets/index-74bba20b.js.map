{"version":3,"file":"index-74bba20b.js","sources":["../../src/features/sign_up_form/model.ts","../../src/features/sign_up_form/ui.tsx","../../src/features/sign_up_form/index.ts","../../src/pages/sign_up/model.ts","../../src/pages/sign_up/page.tsx"],"sourcesContent":["import { createEvent, createStore, sample } from 'effector'\n\nimport { $$session } from '~src/entities/session'\n\nexport interface SignUpForm {\n\temail: string\n\tpassword: string\n\tconfirm: string\n}\n\nexport function createSignUpForm() {\n\tconst submit = createEvent<SignUpForm>()\n\tconst setErrors = createEvent<SignUpForm>()\n\n\tconst $errors = createStore<SignUpForm>({} as SignUpForm)\n\tconst $signUpPending = $$session.signUpFx.pending\n\n\t$errors.on(setErrors, (_, errors) => errors)\n\n\tsample({\n\t\tclock: submit,\n\t\tfilter: (form) => form?.email !== '' && form?.password !== '' && form?.confirm !== '',\n\t\ttarget: $$session.signedUp,\n\t})\n\n\treturn {\n\t\tsubmit,\n\t\tsetErrors,\n\t\t$errors,\n\t\t$signUpPending,\n\t}\n}\n","import { LockOutlined, UserOutlined } from '@ant-design/icons'\nimport { Button, Form, Input } from 'antd'\nimport cn from 'classnames'\nimport { useUnit } from 'effector-react'\nimport { z } from 'zod'\n\nimport { type createSignUpForm, type SignUpForm } from './model'\nimport styles from './styles.module.scss'\n\ninterface SignUpFormProps {\n\tclassName?: string\n\tmodel: ReturnType<typeof createSignUpForm>\n}\n\nconst schema = z\n\t.object({\n\t\temail: z.string({ required_error: 'Введите почту' }).email({ message: 'Введите корректную почту' }),\n\t\tpassword: z\n\t\t\t.string({ required_error: 'Введите пароль' })\n\t\t\t.min(6, { message: 'Пароль должен быть не менее 6 символов' }),\n\t\tconfirmPassword: z\n\t\t\t.string({ required_error: 'Введите подтерждающий пароль' })\n\t\t\t.min(6, { message: 'Пароль должен быть не менее 6 символов' }),\n\t})\n\t.refine((data) => data.password === data.confirmPassword, {\n\t\tmessage: 'Пароль и подтверждающий пароль не совпадают',\n\t\tpath: ['confirmPassword'],\n\t})\n\nexport function SignUpForm(props: SignUpFormProps) {\n\tconst { className, model } = props\n\n\tconst [form] = Form.useForm()\n\tconst [errors, setErrors] = useUnit([model.$errors, model.setErrors])\n\tconst signUpPending = useUnit(model.$signUpPending)\n\tconst handleFinish = useUnit(model.submit)\n\n\tconst onFinish = async (values: SignUpForm) => {\n\t\ttry {\n\t\t\tawait schema.parse(values)\n\t\t\thandleFinish(values)\n\t\t} catch (err: any) {\n\t\t\tsetErrors(err.formErrors.fieldErrors)\n\t\t}\n\t}\n\n\treturn (\n\t\t<Form className={cn(styles.form, className)} form={form} size='large' onFinish={onFinish}>\n\t\t\t<Form.Item name='email' validateStatus={errors?.email ? 'error' : ''} help={errors.email}>\n\t\t\t\t<Input prefix={<UserOutlined />} />\n\t\t\t</Form.Item>\n\t\t\t<Form.Item name='password' validateStatus={errors?.password ? 'error' : ''} help={errors.password}>\n\t\t\t\t<Input.Password prefix={<LockOutlined />} />\n\t\t\t</Form.Item>\n\t\t\t<Form.Item\n\t\t\t\tname='confirm'\n\t\t\t\tvalidateStatus={errors?.confirm ? 'error' : ''}\n\t\t\t\thelp={errors.confirm}\n\t\t\t>\n\t\t\t\t<Input.Password prefix={<LockOutlined />} />\n\t\t\t</Form.Item>\n\t\t\t<Form.Item className={cn(styles.submit)}>\n\t\t\t\t<Button htmlType='submit' type='primary' loading={signUpPending}>\n\t\t\t\t\tЗарегистрироваться\n\t\t\t\t</Button>\n\t\t\t</Form.Item>\n\t\t</Form>\n\t)\n}\n","import { createSignUpForm } from './model'\nimport { SignUpForm } from './ui'\n\nexport const SignUpFactory = {\n\tForm: SignUpForm,\n\tcreate: createSignUpForm,\n}\n","import { SignUpFactory } from '~src/features/sign_up_form'\n\nexport const $$signUpForm = SignUpFactory.create()\n","import { Button, Layout, Typography } from 'antd'\nimport cn from 'classnames'\nimport { motion } from 'framer-motion'\nimport { NavLink } from 'react-router-dom'\n\nimport { SignUpFactory } from '~src/features/sign_up_form'\n\nimport { Logo } from '~src/shared/assets'\n\nimport * as model from './model'\nimport { routes } from '../routes'\nimport styles from './styles.module.scss'\n\nexport function SignUpPage() {\n\treturn (\n\t\t<Layout className={styles.root}>\n\t\t\t<Layout.Content className='container'>\n\t\t\t\t<div className={styles.section}>\n\t\t\t\t\t<NavLink className={cn(styles.logo_link)} to={routes.landing()}>\n\t\t\t\t\t\t<img src={Logo} alt='logo' />\n\t\t\t\t\t\t<Typography.Text>Self Ment</Typography.Text>\n\t\t\t\t\t</NavLink>\n\t\t\t\t\t<Typography.Title level={2} className={cn(styles.title)}>\n\t\t\t\t\t\tРегистрация\n\t\t\t\t\t</Typography.Title>\n\t\t\t\t\t<div className={styles.form}>\n\t\t\t\t\t\t<SignUpFactory.Form model={model.$$signUpForm} />\n\t\t\t\t\t\t<div className={styles.form_bottom}>\n\t\t\t\t\t\t\t<NavLink to={routes.signIn()}>\n\t\t\t\t\t\t\t\t<Typography.Link>Войти</Typography.Link>\n\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</Layout.Content>\n\t\t</Layout>\n\t)\n}\n"],"names":["createSignUpForm","submit","createEvent","setErrors","$errors","createStore","$signUpPending","$$session.signUpFx","_","errors","sample","form","$$session.signedUp","schema","z","data","SignUpForm","props","className","model","Form","useUnit","signUpPending","handleFinish","onFinish","values","err","jsxs","cn","styles","jsx","Input","UserOutlined","LockOutlined","Button","SignUpFactory","$$signUpForm","SignUpPage","Layout","NavLink","routes","Logo","Typography","model.$$signUpForm"],"mappings":"4OAUO,SAASA,GAAmB,CAClC,MAAMC,EAASC,IACTC,EAAYD,IAEZE,EAAUC,EAAwB,CAAA,CAAgB,EAClDC,EAAiBC,EAAmB,QAE1C,OAAAH,EAAQ,GAAGD,EAAW,CAACK,EAAGC,IAAWA,CAAM,EAEpCC,EAAA,CACN,MAAOT,EACP,OAASU,IAASA,GAAA,YAAAA,EAAM,SAAU,KAAMA,GAAA,YAAAA,EAAM,YAAa,KAAMA,GAAA,YAAAA,EAAM,WAAY,GACnF,OAAQC,CAAU,CAClB,EAEM,CACN,OAAAX,EACA,UAAAE,EACA,QAAAC,EACA,eAAAE,CAAA,CAEF,iECjBMO,EAASC,EACb,OAAO,CACP,MAAOA,EAAE,OAAO,CAAE,eAAgB,gBAAiB,EAAE,MAAM,CAAE,QAAS,2BAA4B,EAClG,SAAUA,EACR,OAAO,CAAE,eAAgB,gBAAA,CAAkB,EAC3C,IAAI,EAAG,CAAE,QAAS,yCAA0C,EAC9D,gBAAiBA,EACf,OAAO,CAAE,eAAgB,8BAAA,CAAgC,EACzD,IAAI,EAAG,CAAE,QAAS,yCAA0C,CAC/D,CAAC,EACA,OAAQC,GAASA,EAAK,WAAaA,EAAK,gBAAiB,CACzD,QAAS,8CACT,KAAM,CAAC,iBAAiB,CACzB,CAAC,EAEK,SAASC,EAAWC,EAAwB,CAC5C,KAAA,CAAE,UAAAC,EAAW,MAAAC,CAAU,EAAAF,EAEvB,CAACN,CAAI,EAAIS,EAAK,QAAQ,EACtB,CAACX,EAAQN,CAAS,EAAIkB,EAAQ,CAACF,EAAM,QAASA,EAAM,SAAS,CAAC,EAC9DG,EAAgBD,EAAQF,EAAM,cAAc,EAC5CI,EAAeF,EAAQF,EAAM,MAAM,EAEnCK,EAAW,MAAOC,GAAuB,CAC1C,GAAA,CACG,MAAAZ,EAAO,MAAMY,CAAM,EACzBF,EAAaE,CAAM,QACXC,GACEvB,EAAAuB,EAAI,WAAW,WAAW,CACrC,CAAA,EAIA,OAAAC,EAAA,KAACP,EAAK,CAAA,UAAWQ,EAAGC,EAAO,KAAMX,CAAS,EAAG,KAAAP,EAAY,KAAK,QAAQ,SAAAa,EACrE,SAAA,CAAAM,EAAAA,IAACV,EAAK,KAAL,CAAU,KAAK,QAAQ,eAAgBX,GAAA,MAAAA,EAAQ,MAAQ,QAAU,GAAI,KAAMA,EAAO,MAClF,SAACqB,EAAA,IAAAC,EAAA,CAAM,OAASD,EAAAA,IAAAE,EAAA,EAAa,EAAI,CAClC,CAAA,EACAF,EAAAA,IAACV,EAAK,KAAL,CAAU,KAAK,WAAW,eAAgBX,GAAA,MAAAA,EAAQ,SAAW,QAAU,GAAI,KAAMA,EAAO,SACxF,eAACsB,EAAM,SAAN,CAAe,OAAQD,EAAAA,IAACG,EAAa,EAAA,CAAA,CAAI,CAC3C,CAAA,EACAH,EAAA,IAACV,EAAK,KAAL,CACA,KAAK,UACL,eAAgBX,GAAA,MAAAA,EAAQ,QAAU,QAAU,GAC5C,KAAMA,EAAO,QAEb,eAACsB,EAAM,SAAN,CAAe,OAAQD,MAACG,GAAa,CAAA,EAAI,CAAA,CAC3C,QACCb,EAAK,KAAL,CAAU,UAAWQ,EAAGC,EAAO,MAAM,EACrC,SAACC,EAAA,IAAAI,EAAA,CAAO,SAAS,SAAS,KAAK,UAAU,QAASZ,EAAe,6BAEjE,CAAA,EACD,CACD,CAAA,CAAA,CAEF,CCjEO,MAAMa,EAAgB,CAC5B,KAAMnB,EACN,OAAQhB,CACT,ECJaoC,EAAeD,EAAc,OAAO,oKCW1C,SAASE,GAAa,CAC5B,OACEP,EAAA,IAAAQ,EAAA,CAAO,UAAWT,EAAO,KACzB,SAACC,EAAA,IAAAQ,EAAO,QAAP,CAAe,UAAU,YACzB,SAAAX,OAAC,MAAI,CAAA,UAAWE,EAAO,QACtB,SAAA,CAACF,EAAAA,KAAAY,EAAA,CAAQ,UAAWX,EAAGC,EAAO,SAAS,EAAG,GAAIW,EAAO,QAAA,EACpD,SAAA,CAAAV,EAAA,IAAC,MAAI,CAAA,IAAKW,EAAM,IAAI,OAAO,EAC1BX,EAAAA,IAAAY,EAAW,KAAX,CAAgB,SAAS,WAAA,CAAA,CAAA,EAC3B,EACAZ,EAAAA,IAACY,EAAW,MAAX,CAAiB,MAAO,EAAG,UAAWd,EAAGC,EAAO,KAAK,EAAG,SAEzD,aAAA,CAAA,EACCF,EAAA,KAAA,MAAA,CAAI,UAAWE,EAAO,KACtB,SAAA,CAAAC,EAAAA,IAACK,EAAc,KAAd,CAAmB,MAAOQ,CAAoB,CAAA,QAC9C,MAAI,CAAA,UAAWd,EAAO,YACtB,eAACU,EAAQ,CAAA,GAAIC,EAAO,SACnB,SAACV,EAAA,IAAAY,EAAW,KAAX,CAAgB,SAAA,OAAA,CAAK,CACvB,CAAA,EACD,CAAA,EACD,CAAA,EACD,EACD,CACD,CAAA,CAEF"}